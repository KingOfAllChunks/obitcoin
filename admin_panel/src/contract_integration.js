class contract_integration{

	constructor(){
		this.accounts = [];
		this.account = "";

		this.contractAbi = [{"constant":true,"inputs":[{"name":"pool","type":"uint16"}],"name":"getMembersBalance","outputs":[{"name":"","type":"uint128[2][]"},{"name":"","type":"uint16[]"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"pool","type":"uint16"}],"name":"getPoolData","outputs":[{"name":"","type":"bytes16[3]"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"pools","type":"uint16[]"},{"name":"members","type":"uint16[]"},{"name":"amount","type":"uint128[]"}],"name":"sendTokensBulk","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getContractAddress","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"member","type":"uint16"}],"name":"getMemberDetails","outputs":[{"name":"","type":"bytes32"},{"name":"","type":"address"},{"name":"","type":"uint8"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getPublishingBlockNumber","outputs":[{"name":"","type":"uint32"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"member","type":"uint16"},{"name":"name","type":"bytes32"},{"name":"adr","type":"address"},{"name":"isAdmin","type":"bool"}],"name":"updateMember","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"id","type":"uint16"},{"name":"admin","type":"bool"}],"name":"setAdmin","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getPools","outputs":[{"name":"","type":"uint16[]"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"pool","type":"uint16"}],"name":"getPoolParticipants","outputs":[{"name":"","type":"uint16[]"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getPoolCount","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"pool","type":"uint16"},{"name":"member","type":"uint16"},{"name":"amount","type":"uint128"}],"name":"sendTokens","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getMembers","outputs":[{"name":"","type":"uint16[]"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"name","type":"bytes16"},{"name":"legalContract","type":"bytes16"},{"name":"financialReports","type":"bytes16"}],"name":"createDebtPool","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"pool","type":"uint16"},{"name":"member","type":"uint16"}],"name":"getMemberBalance","outputs":[{"name":"","type":"uint128[2]"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"pool","type":"uint16"},{"name":"name","type":"bytes16"},{"name":"legalContract","type":"bytes16"},{"name":"financialReports","type":"bytes16"}],"name":"updateDebtPool","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"name","type":"bytes32"},{"name":"adr","type":"address"},{"name":"isAdmin","type":"bool"}],"name":"addMember","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"pool","type":"uint16"},{"name":"amount","type":"uint128"}],"name":"buyTokens","outputs":[],"payable":false,"type":"function"},{"inputs":[],"payable":false,"type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"uint16"},{"indexed":true,"name":"to","type":"uint16"},{"indexed":true,"name":"pool","type":"uint16"},{"indexed":false,"name":"amount","type":"int256"},{"indexed":false,"name":"time","type":"uint256"}],"name":"TokenTransfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"uint16"},{"indexed":true,"name":"to","type":"uint16"},{"indexed":true,"name":"pool","type":"uint16"},{"indexed":false,"name":"amount","type":"uint128"},{"indexed":false,"name":"time","type":"uint256"}],"name":"SliceTransfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"uint16"},{"indexed":true,"name":"pool","type":"uint16"},{"indexed":false,"name":"amount","type":"uint128"},{"indexed":false,"name":"time","type":"uint256"}],"name":"TokenPurchase","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"uint16"},{"indexed":true,"name":"pool","type":"uint16"},{"indexed":false,"name":"added","type":"bool"},{"indexed":false,"name":"time","type":"uint256"}],"name":"PoolChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"uint16"},{"indexed":true,"name":"fromAddress","type":"address"},{"indexed":false,"name":"time","type":"uint256"}],"name":"UnauthorizedAccess","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"uint16"},{"indexed":true,"name":"to","type":"uint16"},{"indexed":false,"name":"added","type":"bool"},{"indexed":false,"name":"time","type":"uint256"}],"name":"AdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"uint16"},{"indexed":true,"name":"to","type":"uint16"},{"indexed":false,"name":"added","type":"bool"},{"indexed":false,"name":"time","type":"uint256"}],"name":"PersonChanged","type":"event"}];

		this.contractCompiled = '606060405234156200000d57fe5b5b33600060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555043600660046101000a81548163ffffffff021916908363ffffffff1602179055506001600660006101000a81548161ffff021916908361ffff1602179055506001600660026101000a81548161ffff021916908361ffff1602179055506080604051908101604052807f4f776e65720000000000000000000000000000000000000000000000000000006000191681526020013373ffffffffffffffffffffffffffffffffffffffff168152602001600360038111156200010c57fe5b81526020016001151581525060016000600660009054906101000a900461ffff1661ffff1661ffff1681526020019081526020016000206000820151816000019060001916905560208201518160010160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060408201518160010160146101000a81548160ff02191690836003811115620001bf57fe5b021790555060608201518160010160156101000a81548160ff02191690831515021790555090505060028054806001018281620001fd9190620002e9565b91600052602060002090601091828204019190066002025b600660009054906101000a900461ffff16909190916101000a81548161ffff021916908361ffff16021790555050600660009054906101000a900461ffff16600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548161ffff021916908361ffff1602179055506006600081819054906101000a900461ffff168092919060010191906101000a81548161ffff021916908361ffff160217905550505b6200034e565b8154818355818115116200032157600f016010900481600f0160109004836000526020600020918201910162000320919062000326565b5b505050565b6200034b91905b80821115620003475760008160009055506001016200032d565b5090565b90565b6140a4806200035e6000396000f300606060405236156100fa576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806304a385e5146100fc57806305790c08146101fc57806323453e2d1461026a57806332a2c5d01461034157806338c5e15a14610393578063438a5f131461041b57806357091c811461044d5780635fd42e4d146104a8578063673a2a1f146104d75780636d8171301461054c5780638eec5d70146105d35780639a59b749146105f95780639eab525314610645578063a5f97554146106ba578063a97bd3fe14610725578063cee11e96146107a0578063e1669f1714610818578063f3fa89df14610866575bfe5b341561010457fe5b61011e600480803561ffff169060200190919050506108a5565b6040518080602001806020018381038352858181518152602001915080516000925b8184101561019957828490602001906020020151600260200280838360008314610189575b80518252602083111561018957602082019150602081019050602083039250610165565b5050509050019260010192610140565b925050508381038252848181518152602001915080519060200190602002808383600083146101e7575b8051825260208311156101e7576020820191506020810190506020830392506101c3565b50505090500194505050505060405180910390f35b341561020457fe5b61021e600480803561ffff16906020019091905050610b6c565b6040518082600360200280838360008314610258575b80518252602083111561025857602082019150602081019050602083039250610234565b50505090500191505060405180910390f35b341561027257fe5b61033f6004808035906020019082018035906020019080806020026020016040519081016040528093929190818152602001838360200280828437820191505050505050919080359060200190820180359060200190808060200260200160405190810160405280939291908181526020018383602002808284378201915050505050509190803590602001908201803590602001908080602002602001604051908101604052809392919081815260200183836020028082843782019150505050505091905050610cf2565b005b341561034957fe5b610351610dd8565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561039b57fe5b6103b5600480803561ffff16906020019091905050610de1565b6040518084600019166000191681526020018373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182600381111561040557fe5b60ff168152602001935050505060405180910390f35b341561042357fe5b61042b610eb6565b604051808263ffffffff1663ffffffff16815260200191505060405180910390f35b341561045557fe5b6104a6600480803561ffff169060200190919080356000191690602001909190803573ffffffffffffffffffffffffffffffffffffffff169060200190919080351515906020019091905050610ed1565b005b34156104b057fe5b6104d5600480803561ffff169060200190919080351515906020019091905050611394565b005b34156104df57fe5b6104e7611644565b6040518080602001828103825283818151815260200191508051906020019060200280838360008314610539575b80518252602083111561053957602082019150602081019050602083039250610515565b5050509050019250505060405180910390f35b341561055457fe5b61056e600480803561ffff169060200190919050506116cb565b60405180806020018281038252838181518152602001915080519060200190602002808383600083146105c0575b8051825260208311156105c05760208201915060208101905060208303925061059c565b5050509050019250505060405180910390f35b34156105db57fe5b6105e36117a7565b6040518082815260200191505060405180910390f35b341561060157fe5b610643600480803561ffff1690602001909190803561ffff169060200190919080356fffffffffffffffffffffffffffffffff169060200190919050506117b5565b005b341561064d57fe5b610655611df6565b60405180806020018281038252838181518152602001915080519060200190602002808383600083146106a7575b8051825260208311156106a757602082019150602081019050602083039250610683565b5050509050019250505060405180910390f35b34156106c257fe5b61072360048080356fffffffffffffffffffffffffffffffff19169060200190919080356fffffffffffffffffffffffffffffffff19169060200190919080356fffffffffffffffffffffffffffffffff1916906020019091905050611e7d565b005b341561072d57fe5b610754600480803561ffff1690602001909190803561ffff16906020019091905050612297565b604051808260026020028083836000831461078e575b80518252602083111561078e5760208201915060208101905060208303925061076a565b50505090500191505060405180910390f35b34156107a857fe5b610816600480803561ffff169060200190919080356fffffffffffffffffffffffffffffffff19169060200190919080356fffffffffffffffffffffffffffffffff19169060200190919080356fffffffffffffffffffffffffffffffff19169060200190919050506123ca565b005b341561082057fe5b61086460048080356000191690602001909190803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035151590602001909190505061277e565b005b341561086e57fe5b6108a3600480803561ffff169060200190919080356fffffffffffffffffffffffffffffffff16906020019091905050612c48565b005b6108ad613f42565b6108b5613f56565b6108bd613f42565b6000600360008661ffff1661ffff16815260200190815260200160002060040160009054906101000a900460ff1615156108f657610000565b600360008661ffff1661ffff168152602001908152602001600020600201805490506040518059106109255750595b90808252806020026020018201604052801561095b57816020015b610948613f6a565b8152602001906001900390816109405790505b509150600090505b600360008661ffff1661ffff168152602001908152602001600020600201805490508161ffff161015610ac757600360008661ffff1661ffff1681526020019081526020016000206003016000600360008861ffff1661ffff1681526020019081526020016000206002018361ffff168154811015156109df57fe5b90600052602060002090601091828204019190066002025b9054906101000a900461ffff1661ffff1661ffff168152602001908152602001600020600280602002604051908101604052809291908260028015610a95576020028201916000905b82829054906101000a90046fffffffffffffffffffffffffffffffff166fffffffffffffffffffffffffffffffff1681526020019060100190602082600f01049283019260010382029150808411610a405790505b5050505050828261ffff16815181101515610aac57fe5b906020019060200201819052505b8080600101915050610963565b81600360008761ffff1661ffff16815260200190815260200160002060020180805480602002602001604051908101604052809291908181526020018280548015610b5957602002820191906000526020600020906000905b82829054906101000a900461ffff1661ffff1681526020019060020190602082600101049283019260010382029150808411610b205790505b50505050509050935093505b5050915091565b610b74613fa4565b600360008361ffff1661ffff16815260200190815260200160002060040160009054906101000a900460ff161515610bab57610000565b606060405190810160405280600360008561ffff1661ffff16815260200190815260200160002060000160009054906101000a9004700100000000000000000000000000000000026fffffffffffffffffffffffffffffffff19166fffffffffffffffffffffffffffffffff19168152602001600360008561ffff1661ffff16815260200190815260200160002060000160109054906101000a9004700100000000000000000000000000000000026fffffffffffffffffffffffffffffffff19166fffffffffffffffffffffffffffffffff19168152602001600360008561ffff1661ffff16815260200190815260200160002060010160009054906101000a9004700100000000000000000000000000000000026fffffffffffffffffffffffffffffffff19166fffffffffffffffffffffffffffffffff191681525090505b919050565b6000600083511480610d05575060008251145b80610d11575060008451145b80610d1e57508251825114155b80610d2b57508351835114155b15610d3557610000565b600090505b82518161ffff16108015610d52575081518161ffff16105b8015610d62575083518161ffff16105b15610dd157610dc3848261ffff16815181101515610d7c57fe5b90602001906020020151848361ffff16815181101515610d9857fe5b90602001906020020151848461ffff16815181101515610db457fe5b906020019060200201516117b5565b5b8080600101915050610d3a565b5b50505050565b60003090505b90565b600060006000600160008561ffff1661ffff16815260200190815260200160002060010160159054906101000a900460ff161515610e1e57610000565b600160008561ffff1661ffff16815260200190815260200160002060000154600160008661ffff1661ffff16815260200190815260200160002060010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600160008761ffff1661ffff16815260200190815260200160002060010160149054906101000a900460ff169250925092505b9193909250565b6000600660049054906101000a900463ffffffff1690505b90565b60026003811115610ede57fe5b60016000600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff1661ffff16815260200190815260200160002060010160149054906101000a900460ff166003811115610f6257fe5b1480610ffc575060036003811115610f7657fe5b60016000600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff1661ffff16815260200190815260200160002060010160149054906101000a900460ff166003811115610ffa57fe5b145b156112ed57600160008561ffff1661ffff16815260200190815260200160002060010160159054906101000a900460ff16151561103857610000565b6003600381111561104557fe5b600160008661ffff1661ffff16815260200190815260200160002060010160149054906101000a900460ff16600381111561107c57fe5b141561108757610000565b61ffff60056000600160008861ffff1661ffff16815260200190815260200160002060010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548161ffff021916908361ffff16021790555083600560008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548161ffff021916908361ffff16021790555082600160008661ffff1661ffff168152602001908152602001600020600001816000191690555081600160008661ffff1661ffff16815260200190815260200160002060010160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508061120b57600161120e565b60025b600160008661ffff1661ffff16815260200190815260200160002060010160146101000a81548160ff0219169083600381111561124757fe5b02179055508361ffff16600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff167f7107c2ae9754688147920c7dbf25c81ed808624042d38439123c6da5fe34beb460004260405180831515151581526020018281526020019250505060405180910390a35b61138e565b3373ffffffffffffffffffffffffffffffffffffffff16600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff167f08a520c83f3f94e52d4d4b14319f76c4924f0b58aa571d1d8956acc5849651ea426040518082815260200191505060405180910390a35b50505050565b600360038111156113a157fe5b60016000600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff1661ffff16815260200190815260200160002060010160149054906101000a900460ff16600381111561142557fe5b1415156114d1573373ffffffffffffffffffffffffffffffffffffffff16600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff167f08a520c83f3f94e52d4d4b14319f76c4924f0b58aa571d1d8956acc5849651ea426040518082815260200191505060405180910390a3611640565b600160008361ffff1661ffff16815260200190815260200160002060010160159054906101000a900460ff16151561150857610000565b6003600381111561151557fe5b600160008461ffff1661ffff16815260200190815260200160002060010160149054906101000a900460ff16600381111561154c57fe5b141561155757610000565b80611563576001611566565b60025b600160008461ffff1661ffff16815260200190815260200160002060010160146101000a81548160ff0219169083600381111561159f57fe5b02179055508161ffff16600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff167f955f9cd413b1613b572ff1877b25ae515763d2a51d926bd21ba78d8ec4f16c3c834260405180831515151581526020018281526020019250505060405180910390a35b5b5050565b61164c613f56565b60048054806020026020016040519081016040528092919081815260200182805480156116c057602002820191906000526020600020906000905b82829054906101000a900461ffff1661ffff16815260200190600201906020826001010492830192600103820291508084116116875790505b505050505090505b90565b6116d3613f56565b600360008361ffff1661ffff16815260200190815260200160002060040160009054906101000a900460ff16151561170a57610000565b600360008361ffff1661ffff16815260200190815260200160002060020180548060200260200160405190810160405280929190818152602001828054801561179a57602002820191906000526020600020906000905b82829054906101000a900461ffff1661ffff16815260200190600201906020826001010492830192600103820291508084116117615790505b505050505090505b919050565b600060048054905090505b90565b600260038111156117c257fe5b60016000600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff1661ffff16815260200190815260200160002060010160149054906101000a900460ff16600381111561184657fe5b14806118e057506003600381111561185a57fe5b60016000600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff1661ffff16815260200190815260200160002060010160149054906101000a900460ff1660038111156118de57fe5b145b15611d50576000816fffffffffffffffffffffffffffffffff16148061192f5750600360008461ffff1661ffff16815260200190815260200160002060040160009054906101000a900460ff16155b806119635750600160008361ffff1661ffff16815260200190815260200160002060010160159054906101000a900460ff16155b1561196d57610000565b600360008461ffff1661ffff16815260200190815260200160002060030160008361ffff1661ffff16815260200190815260200160002060006002811015156119b257fe5b600291828204019190066010025b9054906101000a90046fffffffffffffffffffffffffffffffff166fffffffffffffffffffffffffffffffff1681600360008661ffff1661ffff16815260200190815260200160002060030160008561ffff1661ffff1681526020019081526020016000206000600281101515611a3357fe5b600291828204019190066010025b9054906101000a90046fffffffffffffffffffffffffffffffff16016fffffffffffffffffffffffffffffffff161015611a7a57610000565b6000600360008561ffff1661ffff16815260200190815260200160002060030160008461ffff1661ffff1681526020019081526020016000206000600281101515611ac157fe5b600291828204019190066010025b9054906101000a90046fffffffffffffffffffffffffffffffff166fffffffffffffffffffffffffffffffff16148015611b8857506000600360008561ffff1661ffff16815260200190815260200160002060030160008461ffff1661ffff1681526020019081526020016000206001600281101515611b4b57fe5b600291828204019190066010025b9054906101000a90046fffffffffffffffffffffffffffffffff166fffffffffffffffffffffffffffffffff16145b15611bf457600360008461ffff1661ffff1681526020019081526020016000206002018054806001018281611bbd9190613fdf565b91600052602060002090601091828204019190066002025b84909190916101000a81548161ffff021916908361ffff160217905550505b80600360008561ffff1661ffff16815260200190815260200160002060030160008461ffff1661ffff1681526020019081526020016000206000600281101515611c3a57fe5b600291828204019190066010025b8282829054906101000a90046fffffffffffffffffffffffffffffffff160192506101000a8154816fffffffffffffffffffffffffffffffff02191690836fffffffffffffffffffffffffffffffff1602179055508261ffff168261ffff16600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff167ff3eb50aadbf0d7c57ec5f56ac9bc98188c5eaf05702012ebfe3698cf182ccb4b846fffffffffffffffffffffffffffffffff1642604051808381526020018281526020019250505060405180910390a45b611df1565b3373ffffffffffffffffffffffffffffffffffffffff16600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff167f08a520c83f3f94e52d4d4b14319f76c4924f0b58aa571d1d8956acc5849651ea426040518082815260200191505060405180910390a35b505050565b611dfe613f56565b6002805480602002602001604051908101604052809291908181526020018280548015611e7257602002820191906000526020600020906000905b82829054906101000a900461ffff1661ffff1681526020019060020190602082600101049283019260010382029150808411611e395790505b505050505090505b90565b600060026003811115611e8c57fe5b60016000600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff1661ffff16815260200190815260200160002060010160149054906101000a900460ff166003811115611f1057fe5b1480611faa575060036003811115611f2457fe5b60016000600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff1661ffff16815260200190815260200160002060010160149054906101000a900460ff166003811115611fa857fe5b145b156121f05760036000600660029054906101000a900461ffff1661ffff1661ffff1681526020019081526020016000209050838160000160006101000a8154816fffffffffffffffffffffffffffffffff021916908370010000000000000000000000000000000090040217905550828160000160106101000a8154816fffffffffffffffffffffffffffffffff021916908370010000000000000000000000000000000090040217905550818160010160006101000a8154816fffffffffffffffffffffffffffffffff02191690837001000000000000000000000000000000009004021790555060018160040160006101000a81548160ff021916908315150217905550600480548060010182816120c49190613fdf565b91600052602060002090601091828204019190066002025b600660029054906101000a900461ffff16909190916101000a81548161ffff021916908361ffff16021790555050600660029054906101000a900461ffff1661ffff16600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff167f1f6540b99f70a62641d39a080ec69b8a1442f4a4019da09b6bb25ae3d7d7621c60014260405180831515151581526020018281526020019250505060405180910390a36006600281819054906101000a900461ffff168092919060010191906101000a81548161ffff021916908361ffff160217905550505b612291565b3373ffffffffffffffffffffffffffffffffffffffff16600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff167f08a520c83f3f94e52d4d4b14319f76c4924f0b58aa571d1d8956acc5849651ea426040518082815260200191505060405180910390a35b50505050565b61229f614019565b600360008461ffff1661ffff16815260200190815260200160002060040160009054906101000a900460ff1615806123005750600160008361ffff1661ffff16815260200190815260200160002060010160159054906101000a900460ff16155b1561230a57610000565b600360008461ffff1661ffff16815260200190815260200160002060030160008361ffff1661ffff1681526020019081526020016000206002806020026040519081016040528092919082600280156123bc576020028201916000905b82829054906101000a90046fffffffffffffffffffffffffffffffff166fffffffffffffffffffffffffffffffff1681526020019060100190602082600f010492830192600103820291508084116123675790505b505050505090505b92915050565b600260038111156123d757fe5b60016000600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff1661ffff16815260200190815260200160002060010160149054906101000a900460ff16600381111561245b57fe5b14806124f557506003600381111561246f57fe5b60016000600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff1661ffff16815260200190815260200160002060010160149054906101000a900460ff1660038111156124f357fe5b145b156126d757600360008561ffff1661ffff16815260200190815260200160002060040160009054906101000a900460ff16151561253157610000565b82600360008661ffff1661ffff16815260200190815260200160002060000160006101000a8154816fffffffffffffffffffffffffffffffff02191690837001000000000000000000000000000000009004021790555081600360008661ffff1661ffff16815260200190815260200160002060000160106101000a8154816fffffffffffffffffffffffffffffffff02191690837001000000000000000000000000000000009004021790555080600360008661ffff1661ffff16815260200190815260200160002060010160006101000a8154816fffffffffffffffffffffffffffffffff0219169083700100000000000000000000000000000000900402179055508361ffff16600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff167f1f6540b99f70a62641d39a080ec69b8a1442f4a4019da09b6bb25ae3d7d7621c60004260405180831515151581526020018281526020019250505060405180910390a35b612778565b3373ffffffffffffffffffffffffffffffffffffffff16600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff167f08a520c83f3f94e52d4d4b14319f76c4924f0b58aa571d1d8956acc5849651ea426040518082815260200191505060405180910390a35b50505050565b6002600381111561278b57fe5b60016000600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff1661ffff16815260200190815260200160002060010160149054906101000a900460ff16600381111561280f57fe5b14806128a957506003600381111561282357fe5b60016000600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff1661ffff16815260200190815260200160002060010160149054906101000a900460ff1660038111156128a757fe5b145b15612ba25760008273ffffffffffffffffffffffffffffffffffffffff1614156128d257610000565b608060405190810160405280846000191681526020018373ffffffffffffffffffffffffffffffffffffffff16815260200182612910576001612913565b60025b600381111561291e57fe5b81526020016001151581525060016000600660009054906101000a900461ffff1661ffff1661ffff1681526020019081526020016000206000820151816000019060001916905560208201518160010160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060408201518160010160146101000a81548160ff021916908360038111156129d057fe5b021790555060608201518160010160156101000a81548160ff021916908315150217905550905050600660009054906101000a900461ffff16600560008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548161ffff021916908361ffff16021790555060028054806001018281612a769190613fdf565b91600052602060002090601091828204019190066002025b600660009054906101000a900461ffff16909190916101000a81548161ffff021916908361ffff16021790555050600660009054906101000a900461ffff1661ffff16600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff167f7107c2ae9754688147920c7dbf25c81ed808624042d38439123c6da5fe34beb460014260405180831515151581526020018281526020019250505060405180910390a36006600081819054906101000a900461ffff168092919060010191906101000a81548161ffff021916908361ffff160217905550505b612c43565b3373ffffffffffffffffffffffffffffffffffffffff16600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff167f08a520c83f3f94e52d4d4b14319f76c4924f0b58aa571d1d8956acc5849651ea426040518082815260200191505060405180910390a35b505050565b6000600060006000600060006000600060026003811115612c6557fe5b60016000600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff1661ffff16815260200190815260200160002060010160149054906101000a900460ff166003811115612ce957fe5b1480612d83575060036003811115612cfd57fe5b60016000600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff1661ffff16815260200190815260200160002060010160149054906101000a900460ff166003811115612d8157fe5b145b15613e95576000896fffffffffffffffffffffffffffffffff161480612dd25750600360008b61ffff1661ffff16815260200190815260200160002060040160009054906101000a900460ff16155b80612dfe57506000600360008c61ffff1661ffff16815260200190815260200160002060020180549050145b15612e0857610000565b60009750600096506000955060009450600094505b600360008b61ffff1661ffff16815260200190815260200160002060020180549050851015612f1557600360008b61ffff1661ffff1681526020019081526020016000206003016000600360008d61ffff1661ffff16815260200190815260200160002060020187815481101515612e9157fe5b90600052602060002090601091828204019190066002025b9054906101000a900461ffff1661ffff1661ffff1681526020019081526020016000206000600281101515612eda57fe5b600291828204019190066010025b9054906101000a90046fffffffffffffffffffffffffffffffff16880197505b8480600101955050612e1d565b600094506000886fffffffffffffffffffffffffffffffff16111561351b57600094505b600360008b61ffff1661ffff1681526020019081526020016000206002018054905085101561351a57600360008b61ffff1661ffff16815260200190815260200160002060020185815481101515612f8d57fe5b90600052602060002090601091828204019190066002025b9054906101000a900461ffff169350600360008b61ffff1661ffff16815260200190815260200160002060030160008561ffff1661ffff1681526020019081526020016000206000600281101515612ff957fe5b600291828204019190066010025b9054906101000a90046fffffffffffffffffffffffffffffffff169250600360008b61ffff1661ffff16815260200190815260200160002060030160008561ffff1661ffff168152602001908152602001600020600160028110151561306957fe5b600291828204019190066010025b9054906101000a90046fffffffffffffffffffffffffffffffff169150876fffffffffffffffffffffffffffffffff168984026fffffffffffffffffffffffffffffffff168115156130c557fe5b049050826fffffffffffffffffffffffffffffffff168184036fffffffffffffffffffffffffffffffff161115613278578961ffff168461ffff16600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff167ff3eb50aadbf0d7c57ec5f56ac9bc98188c5eaf05702012ebfe3698cf182ccb4b866fffffffffffffffffffffffffffffffff1660000342604051808381526020018281526020019250505060405180910390a48961ffff168461ffff16600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff167f190acdb2d73a06a0bfaba310bd3d6a1828c500aeab3cbc74168a53e44565c9e0864260405180836fffffffffffffffffffffffffffffffff166fffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a482860195508282019150600092506133f7565b8961ffff168461ffff16600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff167ff3eb50aadbf0d7c57ec5f56ac9bc98188c5eaf05702012ebfe3698cf182ccb4b846fffffffffffffffffffffffffffffffff1660000342604051808381526020018281526020019250505060405180910390a48961ffff168461ffff16600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff167f190acdb2d73a06a0bfaba310bd3d6a1828c500aeab3cbc74168a53e44565c9e0844260405180836fffffffffffffffffffffffffffffffff166fffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a48083039250808201915080860195505b82600360008c61ffff1661ffff16815260200190815260200160002060030160008661ffff1661ffff168152602001908152602001600020600060028110151561343d57fe5b600291828204019190066010025b6101000a8154816fffffffffffffffffffffffffffffffff02191690836fffffffffffffffffffffffffffffffff16021790555081600360008c61ffff1661ffff16815260200190815260200160002060030160008661ffff1661ffff16815260200190815260200160002060016002811015156134c557fe5b600291828204019190066010025b6101000a8154816fffffffffffffffffffffffffffffffff02191690836fffffffffffffffffffffffffffffffff16021790555081870196505b8480600101955050612f39565b5b886fffffffffffffffffffffffffffffffff16866fffffffffffffffffffffffffffffffff1610156137ee576000876fffffffffffffffffffffffffffffffff1611156137ec57600094505b600360008b61ffff1661ffff168152602001908152602001600020600201805490508510156137e757600360008b61ffff1661ffff168152602001908152602001600020600201858154811015156135bb57fe5b90600052602060002090601091828204019190066002025b9054906101000a900461ffff169350600360008b61ffff1661ffff16815260200190815260200160002060030160008561ffff1661ffff168152602001908152602001600020600160028110151561362757fe5b600291828204019190066010025b9054906101000a90046fffffffffffffffffffffffffffffffff169150866fffffffffffffffffffffffffffffffff16868a0383026fffffffffffffffffffffffffffffffff1681151561368557fe5b0490508082019150808601955081600360008c61ffff1661ffff16815260200190815260200160002060030160008661ffff1661ffff16815260200190815260200160002060016002811015156136d857fe5b600291828204019190066010025b6101000a8154816fffffffffffffffffffffffffffffffff02191690836fffffffffffffffffffffffffffffffff1602179055508961ffff168461ffff16600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff167f190acdb2d73a06a0bfaba310bd3d6a1828c500aeab3cbc74168a53e44565c9e0844260405180836fffffffffffffffffffffffffffffffff166fffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a45b8480600101955050613567565b6137ed565b5b5b886fffffffffffffffffffffffffffffffff16866fffffffffffffffffffffffffffffffff161015613da457600360008b61ffff1661ffff1681526020019081526020016000206002016001600360008d61ffff1661ffff168152602001908152602001600020600201805490500381548110151561386957fe5b90600052602060002090601091828204019190066002025b9054906101000a900461ffff1693508589036fffffffffffffffffffffffffffffffff16600360008c61ffff1661ffff16815260200190815260200160002060030160008661ffff1661ffff16815260200190815260200160002060006002811015156138ea57fe5b600291828204019190066010025b9054906101000a90046fffffffffffffffffffffffffffffffff166fffffffffffffffffffffffffffffffff161115613a8d57858903600360008c61ffff1661ffff16815260200190815260200160002060030160008661ffff1661ffff168152602001908152602001600020600060028110151561397357fe5b600291828204019190066010025b8282829054906101000a90046fffffffffffffffffffffffffffffffff160392506101000a8154816fffffffffffffffffffffffffffffffff02191690836fffffffffffffffffffffffffffffffff1602179055508961ffff168461ffff16600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff167ff3eb50aadbf0d7c57ec5f56ac9bc98188c5eaf05702012ebfe3698cf182ccb4b898d036fffffffffffffffffffffffffffffffff1660000342604051808381526020018281526020019250505060405180910390a4613c34565b8961ffff168461ffff16600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff167ff3eb50aadbf0d7c57ec5f56ac9bc98188c5eaf05702012ebfe3698cf182ccb4b600360008f61ffff1661ffff16815260200190815260200160002060030160008961ffff1661ffff1681526020019081526020016000206000600281101515613b4f57fe5b600291828204019190066010025b9054906101000a90046fffffffffffffffffffffffffffffffff166fffffffffffffffffffffffffffffffff1660000342604051808381526020018281526020019250505060405180910390a46000600360008c61ffff1661ffff16815260200190815260200160002060030160008661ffff1661ffff1681526020019081526020016000206000600281101515613bf157fe5b600291828204019190066010025b6101000a8154816fffffffffffffffffffffffffffffffff02191690836fffffffffffffffffffffffffffffffff1602179055505b858903600360008c61ffff1661ffff16815260200190815260200160002060030160008661ffff1661ffff1681526020019081526020016000206001600281101515613c7c57fe5b600291828204019190066010025b8282829054906101000a90046fffffffffffffffffffffffffffffffff160192506101000a8154816fffffffffffffffffffffffffffffffff02191690836fffffffffffffffffffffffffffffffff1602179055508961ffff168461ffff16600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff167f190acdb2d73a06a0bfaba310bd3d6a1828c500aeab3cbc74168a53e44565c9e0898d034260405180836fffffffffffffffffffffffffffffffff166fffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a48895505b886fffffffffffffffffffffffffffffffff16866fffffffffffffffffffffffffffffffff161115613dd557610000565b8961ffff16600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff167f56b23e5cb3910a046f9a66c3017ae49b4def7ebae1fb08b4adf446b4fd4c47f1884260405180836fffffffffffffffffffffffffffffffff166fffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a35b613f36565b3373ffffffffffffffffffffffffffffffffffffffff16600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900461ffff1661ffff167f08a520c83f3f94e52d4d4b14319f76c4924f0b58aa571d1d8956acc5849651ea426040518082815260200191505060405180910390a35b50505050505050505050565b602060405190810160405280600081525090565b602060405190810160405280600081525090565b6040604051908101604052806002905b60006fffffffffffffffffffffffffffffffff16815260200190600190039081613f7a5790505090565b6060604051908101604052806003905b60006fffffffffffffffffffffffffffffffff1916815260200190600190039081613fb45790505090565b81548183558181151161401457600f016010900481600f016010900483600052602060002091820191016140139190614053565b5b505050565b6040604051908101604052806002905b60006fffffffffffffffffffffffffffffffff168152602001906001900390816140295790505090565b61407591905b80821115614071576000816000905550600101614059565b5090565b905600a165627a7a72305820da68fdbead7458cf8f8e8d82b2b610b2affb8f9baacd54c452e1c9347cc98e310029';

		this.contractGas = '4700000';

		this.connected = false;

		this.init();
		this.self = this;
	}

	init(){
		var self = this;
		window.onload = function() {
			web3.eth.getAccounts(function(err, accs) {
				if (err != null) {
				alert("There was an error fetching your accounts.");
				return;
				}

				if (accs.length == 0) {
				alert("Couldn't get any accounts! Make sure your Ethereum client is configured correctly.");
				return;
			}
			
				self.accounts = accs;
				self.account = self.accounts[0];
				
			});
		}
	}

	deployNewContract() {
		var self = this;

		var obitcoinContract = web3.eth.contract(this.contractAbi);
		this.Obitcoin = obitcoinContract.new(
		{
			from: web3.eth.accounts[0], 
			data: this.contractCompiled, 
			gas: this.contractGas
		}, function (e, contract){
			console.log(e, contract);
			if (typeof contract.address !== 'undefined') {
				console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
				
				self.connected = true;
			}
		})
	}

	connectToContract(address, callback) {

		var obitcoinContract = web3.eth.contract(this.contractAbi);
		
		this.Obitcoin = obitcoinContract.at(address);
		
		var self = this;

		try {
			this.Obitcoin.getContractAddress.call({from: this.account}, function(error, result){
				if(!error)
					if(result==address){
						console.log("Connection successful");
						self.connected = true;
						callback();
					} else {
						callback("Invalid address!");
					}
				else{
					console.error(error);
					callback("There was an error. Reload the page and try again");
				}
			});
		} catch (err){
			callback(err.message);
		}
	}

	isConnected(){
		return this.connected;
	}

	getPools(callback){
		this.Obitcoin.getPools.call({from: this.account}, function(error, result){
			if(!error){
				var data = [];
				result.forEach(res => data.push(res.valueOf()));
				callback(data);
			}
			else
				console.error(error);
		});
	}

	getPoolData(pool, callback){
		var self = this;
		this.Obitcoin.getPoolData.call(pool, {from: this.account}, function(error, result){
			if(!error){
				var data = [];
				result.forEach(item => data.push(self.hex2a(item)));
				callback(data);
			}
			else
				console.error(error);
		});
	}

	getPoolParticipants(pool, callback) {
		this.Obitcoin.getPoolParticipants.call(pool, {from: this.account}, function(error, result){
			if(!error){
				var data = [];
				result.forEach(res => data.push(res.valueOf()));
				callback(data);
			}
			else
				console.error(error);
		});
	}

	getMembers(callback){
		this.Obitcoin.getMembers.call({from: this.account}, function(error, result){
			if(!error){
				var data = [];
				result.forEach(res => data.push(res.valueOf()));
				callback(data);
			}
			else
				console.error(error);
		});
	}

	getMemberBalance(pool, member, callback){
		this.Obitcoin.getMemberBalance.call(pool, member, {from: this.account}, function(error, result){
			if(!error){
				var data = [];
				result.forEach(res => data.push(res.valueOf()));
				callback(data, member);
			}
			else
				console.error(error);
		});
	}

	/*getMemberName(member, callback){
		var self = this;
		this.Obitcoin.getMemberName.call(member, {from: this.account}, function(error, result){
			if(!error){
				callback(self.hex2a(result));
			}
			else
				console.error(error);
		});
	}
		
	getMemberAddress(member, callback){
		this.Obitcoin.getMemberAddress.call(member, {from: this.account}, function(error, result){
			if(!error){
				callback(result);
			}
			else
				console.error(error);
		});
	}

	getMemberPermLevel(member, callback){
		this.Obitcoin.getMemberPermLevel.call(member, {from: this.account}, function(error, result){
			if(!error)
				callback(result.valueOf());
			else
				console.error(error);
		});
	}*/

	getMemberDetails(member, callback){
		var self = this;

		this.Obitcoin.getMemberDetails.call(member, {from: this.account}, function(error, result){
			if(!error){
				var data = [3];
				data[0] = self.hex2a(result[0]);
				data[1] = result[1];
				data[2] = result[2].valueOf();

				callback(data);
			}
			else
				console.error(error);
		});
	}

	getWholeMembers(callback){
		var members = [];
		var self = this;
		this.getMembers(function(data){
			if(data.length==0) callback(members);
			for(var i = 0; i<data.length; i++){
				self.getWholeMember(data[i], function(member){
					members.push(member);

					if(members.length == data.length){
						callback(members);
					}
				});

			}
		});
	}

	getWholeMember(id, callback){
		var member = {};
		member.id = Number(id);

		this.getMemberDetails(id, function(result){
			member.name = result[0];
			member.address = result[1];
			member.permissionLevel = result[2];

			callback(member);
		});

		/*this.getMemberName(id, function(result){
			member.name = result;

			if(member.name != undefined && member.address != undefined && member.permissionLevel != undefined) callback(member);
		});
		this.getMemberAddress(id, function(result){
			member.address = result;

			if(member.name != undefined && member.address != undefined && member.permissionLevel != undefined) callback(member);
		});
		this.getMemberPermLevel(id, function(result){
			member.permissionLevel = Number(result);

			if(member.name != undefined && member.address != undefined && member.permissionLevel != undefined) callback(member);
		});*/
	}

	getWholePools(callback){
		var pools = [];
		var self = this;
		this.getPools(function(data){
			if(data.length==0) callback(pools);

			for(var i = 0; i<data.length; i++){
				self.getWholePool(data[i], function(pool){
					pools.push(pool);

					if(pools.length == data.length){
						callback(pools);
					}
				});

			}
		});
	}

	getWholePool(id, callback){
		var self = this;

		var pool = {};
		pool.id = Number(id);
		var stage1=false, stage2=false;

		pool.tokens = new Map();
		pool.slices = new Map();

		this.getPoolData(id, function(result){
			console.log(result);
			pool.name = result[0];
			pool.legalContract = result[1];
			pool.financialReports = result[2];

			stage1=true;

			if(stage1 && stage2) callback(pool);
		});

		this.getPoolParticipants(id, function(result){
			pool.members = [];
			result.forEach(item => pool.members.push(Number(item)));
			
			if(result.length==0 && stage1) callback(pool);

			for(var i=0; i<result.length; i++){
				self.getMemberBalance(id, result[i], function(data, member){
					pool.tokens[Number(member)] = Number(data[0]);
					pool.slices[Number(member)] = Number(data[1]);

					if(result[result.length-1]==member){
						stage2=true;

						if(stage1 && stage2) callback(pool);
					}
				});
			}
		});
	}

	addMember(name, address, isAdmin, callback){
		console.log("Address is "+address);
		this.Obitcoin.addMember(name, address, isAdmin, {from: this.account}, function(error, result){
			if(!error){
				callback(result);
			}
			else
				console.error(error);
		});
	}

	setAdmin(member, admin) {
		this.Obitcoin.setAdmin(member, admin, {from: this.account}, function(error, result){
			if(!error)
				console.log(result);
			else
				console.error(error);
		});
	}

	createDebtPool(name, legalContract, financialReports, callback) {
		this.Obitcoin.createDebtPool(name, legalContract, financialReports, {from: this.account}, function(error, result){
			if(!error)
				callback(result);
			else
				console.error(error);
		});
	}

	updateMember(member, name, address, isAdmin, callback){
		console.log(address);
		console.log(address.trim());

		var bytes = []; // char codes

		for (var i = 0; i < address.length; ++i) {
			var code = address.charCodeAt(i);

			bytes = bytes.concat([code]);
		}


		console.log(bytes, bytes.length);
		this.Obitcoin.updateMember(member, name, address, isAdmin, {from: this.account}, function(error, result){
			if(!error){
				console.log(result);
				callback(result);
			}
			else
				console.error(error);
		});
	}

	updatePool(pool, name, legalContract, financialReports, callback){
		this.Obitcoin.updateDebtPool(pool, name, legalContract, financialReports, {from: this.account}, function(error, result){
			if(!error){
				console.log(result);
				callback(result);
			}
			else
				console.error(error);
		});
	}

	sendTokens(pools, member, amount, callback){
		this.Obitcoin.sendTokens(pools, member, amount, {from: this.account}, function(error, result){
			if(!error)
				callback(result)
			else
				console.error(error);
		});
	}

	sendTokensBulk(pool, members, amount, callback){
		this.Obitcoin.sendTokensBulk(pool, members, amount, {from: this.account}, function(error, result){
			if(!error)
				callback(result)
			else
				console.error(error);
		});
	}

	buyTokens(pool, amount, callback){
		this.Obitcoin.buyTokens(pool, amount, {from: this.account}, function(error, result){
			if(!error)
				callback(result)
			else
				console.error(error);
		});
	}

	startListeningForEvents(callback){
		var self = this;

		this.Obitcoin.getPublishingBlockNumber.call({from: this.account}, function(error, result){

			var events = self.Obitcoin.allEvents({fromBlock: result.valueOf()});
			events.watch(function(err, event) {
				if (err) {
					console.log(err)
					return;
				}

				callback(event);
			});

		});

		/*var coinsTransferEvent = this.Obitcoin.CoinsTransfer({}, {fromBlock: 0});
		coinsTransferEvent.watch(function(err, result) {
			if (err) {
				console.log(err)
				return;
			}
			console.log("["+result.args.time.valueOf()+"] sent "+result.args.amount.valueOf()+" from "+result.args.from+" to "+result.args.to);
		});
		
		var coinsPurchaseEvent = this.Obitcoin.CoinsPurchase({}, {fromBlock: 0});
		coinsPurchaseEvent.watch(function(err, result) {
			if (err) {
				console.log(err)
				return;
			}
			console.log("["+result.args.time.valueOf()+"] bought "+result.args.amount.valueOf()+" from "+result.args.from+" to "+result.args.poolIndex+" debt pool");
		});
		
		var poolCreatedEvent = this.Obitcoin.PoolCreated({}, {fromBlock: 0});
		poolCreatedEvent.watch(function(err,result) {
			if(err) {
				console.log(err);
				return;
			}
			console.log("["+result.args.time.valueOf()+"] created pool with index "+result.args.index.valueOf());
		});
		
		var unauthorizedAccessEvent = this.Obitcoin.UnauthorizedAccess({}, {fromBlock: 0});
		unauthorizedAccessEvent.watch(function(err,result) {
			if(err) {
				console.log(err);
				return;
			}
			console.log("["+result.args.time.valueOf()+"] Warning! Unauthorized access from "+result.args.from);
		});
		
		var adminChangedEvent = this.Obitcoin.AdminChanged({}, {fromBlock: 0});
		adminChangedEvent.watch(function(err,result) {
			if(err) {
				console.log(err);
				return;
			}
			console.log("["+result.args.time.valueOf()+"]" + (result.args.added ? "Added" : "Removed") + " admin with address "+result.args.person);
		});*/
		
		
	}

	hex2a(hexx) {
		var hex = hexx.toString();//force conversion
		var str = '';
		var int;
		for (var i = 2; i < hex.length; i += 2){
			int = parseInt(hex.substr(i, 2), 16);
			if(int==0) continue;
			str += String.fromCharCode(int);
		}
		return str;
	}

}